//go:build !co

// Code generated by github.com/goghcrow/go-co DO NOT EDIT.
package src

import (
	"testing"

	. "github.com/goghcrow/go-co"
	ʂɘʠ "github.com/goghcrow/go-co/seq"
)

func TestTypeSwitchTrival(t *testing.T) {
	f := func() {}
	g := func() (_ ʂɘʠ.Iterator[int]) {
		return ʂɘʠ.Start[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
			return ʂɘʠ.Bind[int](0, func() ʂɘʠ.Seq[int] {

				var a any
				return ʂɘʠ.Combine[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					switch a.(type) {
					case int:
						return ʂɘʠ.Bind[int](1, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					case string:
						return ʂɘʠ.Bind[int](2, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					default:

						f()
						return ʂɘʠ.Bind[int](3, func() ʂɘʠ.Seq[int] {

							f()
							return ʂɘʠ.Normal[int]()
						})
					}
				}), ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Bind[int](4, func() ʂɘʠ.Seq[int] {

						f()
						return ʂɘʠ.Return[int]()
					})
				}))
			})
		}))

	}
	xs := iter2slice(g())
	assertEqual(t, xs, []int{0, 3, 4})
}

func TestTypeSwitchTrivalInitAndNotDefaultBranch(t *testing.T) {
	g := func(a any) (_ ʂɘʠ.Iterator[int]) {
		return ʂɘʠ.Start[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
			return ʂɘʠ.Bind[int](0, func() ʂɘʠ.Seq[int] {
				return ʂɘʠ.Combine[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {

						x := a
						switch x.(type) {
						case int:
							return ʂɘʠ.Bind[int](1, func() ʂɘʠ.Seq[int] {
								return ʂɘʠ.Normal[int]()
							})
						case string:
							return ʂɘʠ.Bind[int](2, func() ʂɘʠ.Seq[int] {
								return ʂɘʠ.Normal[int]()
							})
						default:
							return ʂɘʠ.Bind[int](3, func() ʂɘʠ.Seq[int] {
								return ʂɘʠ.Normal[int]()
							})
						}
					})
				}), ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Bind[int](4, func() ʂɘʠ.Seq[int] {
						return ʂɘʠ.Return[int]()
					})
				}))
			})
		}))

	}

	{
		xs := iter2slice(g(1))
		assertEqual(t, xs, []int{0, 1, 4})
	}
	{
		xs := iter2slice(g(""))
		assertEqual(t, xs, []int{0, 2, 4})
	}
	{
		xs := iter2slice(g(3.13))
		assertEqual(t, xs, []int{0, 3, 4})
	}
}

func TestTypeSwitchScope(t *testing.T) {
	g := func(a any) (_ ʂɘʠ.Iterator[int]) {
		return ʂɘʠ.Start[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
			return ʂɘʠ.Bind[int](0, func() ʂɘʠ.Seq[int] {

				x := 42
				return ʂɘʠ.Combine[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {

						x := a
						switch x.(type) {
						case int:
							return ʂɘʠ.Bind[int](1, func() ʂɘʠ.Seq[int] {
								return ʂɘʠ.Normal[int]()
							})
						case string:
							return ʂɘʠ.Bind[int](2, func() ʂɘʠ.Seq[int] {
								return ʂɘʠ.Normal[int]()
							})
						default:
							return ʂɘʠ.Bind[int](3, func() ʂɘʠ.Seq[int] {
								return ʂɘʠ.Normal[int]()
							})
						}
					})
				}), ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Bind[int](x, func() ʂɘʠ.Seq[int] {
						return ʂɘʠ.Return[int]()
					})
				}))
			})
		}))

	}

	{
		xs := iter2slice(g(1))
		assertEqual(t, xs, []int{0, 1, 42})
	}
	{
		xs := iter2slice(g(""))
		assertEqual(t, xs, []int{0, 2, 42})
	}
	{
		xs := iter2slice(g(3.13))
		assertEqual(t, xs, []int{0, 3, 42})
	}
}

func TestTypeSwitchYieldInitAndNotDefaultBranch(t *testing.T) {
	g := func() (_ ʂɘʠ.Iterator[int]) {
		return ʂɘʠ.Start[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
			var a any
			return ʂɘʠ.Bind[int](0, func() ʂɘʠ.Seq[int] {
				return ʂɘʠ.Combine[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					switch a.(type) {
					case int:
						return ʂɘʠ.Bind[int](1, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					case string:
						return ʂɘʠ.Bind[int](2, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					}
					return ʂɘʠ.Normal[int]()
				}), ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Bind[int](3, func() ʂɘʠ.Seq[int] {
						return ʂɘʠ.Return[int]()
					})
				}))
			})
		}))

	}
	xs := iter2slice(g())
	assertEqual(t, xs, []int{0, 3})
}

func TestTypeSwitchYieldInitAndNotDefaultBranch1(t *testing.T) {
	g := func() (_ ʂɘʠ.Iterator[int]) {
		return ʂɘʠ.Start[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
			var a any = "hello"
			return ʂɘʠ.Bind[int](0, func() ʂɘʠ.Seq[int] {
				return ʂɘʠ.Combine[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					switch a.(type) {
					case int:
						return ʂɘʠ.Bind[int](1, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					case string:
						return ʂɘʠ.Bind[int](2, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					}
					return ʂɘʠ.Normal[int]()
				}), ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Bind[int](3, func() ʂɘʠ.Seq[int] {
						return ʂɘʠ.Return[int]()
					})
				}))
			})
		}))

	}
	xs := iter2slice(g())
	assertEqual(t, xs, []int{0, 2, 3})
}

func TestTypeSwitchYieldInitAndNotDefaultBranch2(t *testing.T) {
	g := func() (_ ʂɘʠ.Iterator[int]) {
		return ʂɘʠ.Start[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
			var a any = "hello"
			return ʂɘʠ.Bind[int](0, func() ʂɘʠ.Seq[int] {
				return ʂɘʠ.Combine[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					switch a.(type) {
					case int:
						return ʂɘʠ.Bind[int](1, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					case string:
						return ʂɘʠ.Bind[int](2, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Return[int]()
						})
					}
					return ʂɘʠ.Normal[int]()
				}), ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Bind[int](3, func() ʂɘʠ.Seq[int] {
						return ʂɘʠ.Return[int]()
					})
				}))
			})
		}))

	}
	xs := iter2slice(g())
	assertEqual(t, xs, []int{0, 2})
}

func TestTypeSwitchYieldInitAndAssign(t *testing.T) {
	g := func() (_ ʂɘʠ.Iterator[int]) {
		return ʂɘʠ.Start[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
			var a any = 42
			return ʂɘʠ.Bind[int](0, func() ʂɘʠ.Seq[int] {
				return ʂɘʠ.Combine[int](ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					switch b := a.(type) {
					case int:
						return ʂɘʠ.Bind[int](b, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Return[int]()
						})
					case string:
						return ʂɘʠ.Bind[int](2, func() ʂɘʠ.Seq[int] {
							return ʂɘʠ.Normal[int]()
						})
					}
					return ʂɘʠ.Normal[int]()
				}), ʂɘʠ.Delay[int](func() ʂɘʠ.Seq[int] {
					return ʂɘʠ.Bind[int](3, func() ʂɘʠ.Seq[int] {
						return ʂɘʠ.Return[int]()
					})
				}))
			})
		}))

	}
	xs := iter2slice(g())
	assertEqual(t, xs, []int{0, 42})
}
